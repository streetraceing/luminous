/* Root theme variables */
html:root {
    --luminous-background: color-mix(
        in srgb,
        var(--spice-sidebar) 25%,
        transparent
    );
    --luminous-tinted-base: var(--background-tinted-base, rgba(0, 0, 0, 0.08));
    --luminous-tinted-highlight: var(
        --background-tinted-highlight,
        rgba(0, 0, 0, 0.12)
    );
}

/* Spotify colors management */
html:root {
    --spice-main: transparent !important;
    --spice-main-elevated: var(--luminous-background);
    --spice-player: var(--luminous-background);
}

/* Betterize spicetify and spotify ui */
.marketplace-header {
    padding: 8px;
    padding-inline: 16px;
    border-radius: 8px;
    top: 32px;
    backdrop-filter: blur(20px);
}

.GenericModal > .main-embedWidgetGenerator-container {
    --spice-player: var(--spice-card);
    --spice-main: #121212;
}

.marketplace-installButton {
    background: var(--luminous-background);
    backdrop-filter: blur(20px);
    color: var(--spice-text);
}

.main-yourLibraryX-headerContent > div > button {
    background-color: var(--luminous-tinted-base);
}

.main-yourLibraryX-headerContent > div > button:hover {
    background-color: var(--luminous-tinted-highlight);
    transition-duration: var(--shortest-1);
}

.main-home-filterChipsSection::after {
    backdrop-filter: blur(20px);
}

.main-home-content
    > section
    > .main-gridContainer-gridContainer.main-shelf-shelfGrid
    > div
    > div
    > div
    > div {
    --background-color: transparent !important;
}

#context-menu {
    --background-elevated-base: var(--spice-card);
}

dialog {
    --spice-main: var(--spice-card);
}

div[data-encore-id='tabList']:has(#queue-tab) > button {
    border-radius: 8px;
}

.marketplace-header .searchbar-bar {
    border: 0;
}

.main-entityHeader-container::before {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(
        to bottom,
        rgba(0,0,0,0) 0%,
        rgba(0,0,0,0.3) 50%,
        rgba(0,0,0,0.8) 100%
    );
    pointer-events: none;
}

/* Useless menus hide */
.Root__ads-container-desktop--is-hidden,
div[data-testid='test-ref-div'] {
    display: none;
}

/* Root screen views cleanify */
.main-yourLibraryX-library,
.main-yourLibraryX-libraryContainer,
.playlist-playlist-playlistContent,
.YourLibraryX,
.Root__right-sidebar,
.main-home-homeHeader,
.main-topBar-overlay,
#Desktop_PanelContainer_Id,
#Desktop_PanelContainer_Id::before,
div[aria-labelledby^='listrow-title-spotify:album:'],
.main-actionBarBackground-background,
.main-topBar-background,
.lyrics-lyrics-background,
.custom-navlinks-scrollable_container
    > .search-searchCategory-contentArea
    > .search-searchCategory-categoryGrid.search-searchCategory-categoryGrid
    button,
.main-globalNav-searchSection > .main-globalNav-searchContainer > button {
    background: transparent !important;
}

.main-trackList-trackListHeader {
    background: transparent !important;
    position: static;
    box-shadow: unset !important;
}

.playlist-playlist-actionBarBackground-background,
.main-nowPlayingView-coverArtContainer > div::before,
.main-nowPlayingView-coverArtContainer > div::after,
.main-nowPlayingView-contextItemInfo:before,
.main-topBar-topbarContent,
.main-topBar-container,
.before-scroll-node {
    display: none !important;
}

/* Root views glass effect */
#Desktop_LeftSidebar_Id,
#main-view,
.main-nowPlayingBar-nowPlayingBar,
.marketplace-header .Dropdown-control,
.marketplace-header .searchbar-bar,
.marketplace-header-icon-button {
    background: var(--luminous-background) !important;
    backdrop-filter: blur(20px);
}

/* Now playing view setup */
div[data-testid='NPV_Panel_OpenDiv'] {
    --section-background-base: var(--luminous-background);
}

.main-nowPlayingBar-nowPlayingBar {
    border-radius: 8px;
}

#Desktop_PanelContainer_Id:not(:has(.canvasVideoContainerNPV))
    > div
    > div:not(:has(.main-nowPlayingView-nowPlayingWidget)) {
    margin-bottom: 8px;
}

#Desktop_PanelContainer_Id
    > div
    > div:not(:has(.main-nowPlayingView-nowPlayingWidget)) {
    box-shadow: unset !important;
    border-radius: 8px;
    background: var(--luminous-background);
    --background-base: var(--luminous-background);
}
#Desktop_PanelContainer_Id
    > div
    > div[class*=' ']:not(:has(.main-nowPlayingView-nowPlayingWidget))
    > div {
    backdrop-filter: blur(20px);
}

#Desktop_PanelContainer_Id
    > div
    > div:not(:has(.main-nowPlayingView-nowPlayingWidget))
    > div {
    box-shadow: unset !important;
    border-radius: 8px;
}

#Desktop_PanelContainer_Id
    > div
    > div:has(.main-nowPlayingView-nowPlayingWidget) {
    border-radius: 8px;
}

.main-nowPlayingView-section:not(
        .main-nowPlayingView-credits,
        .main-nowPlayingView-queue
    )
    > button
    > div
    > div,
.main-nowPlayingView-section:not(
        .main-nowPlayingView-credits,
        .main-nowPlayingView-queue
    )
    > button {
    background: transparent;
}

div[data-testid='NPV_Panel_OpenDiv'],
div:has(> div[data-testid='NPV_Panel_OpenDiv']),
div[data-testid='track-visual-enhancement'] {
    padding: 0;
}

.main-nowPlayingView-coverArtContainer:has(.canvasVideoContainerNPV) {
    aspect-ratio: 9 / 14.5 !important;
}

div[data-testid='minimized-track-visual-enhancement'],
.main-watchFeed-shareButton {
    display: none;
}
